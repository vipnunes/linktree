!function (t) { "use strict"; function e() { } t.fn.tagsInput = function (n) { var a = t.extend({ tagClass: "badge badge-primary", tagsContainerClass: "form-control", highlightColor: "#ffc107" }, n), i = new e, r = function (t) { return i.fillIn('<div class="tag {tagClass}"><span>{value}</span>{tagRemoveIcon}</div>', { tagClass: i.sanitizeText(a.tagClass), tagRemoveIcon: t ? "" : '<i class="tag-remove">&#10006;</i>' }) }; this.each(function () { if (!this.hasAttribute("data-rendered")) { var e = this.hasAttribute("disabled"), n = r(e), o = function (t) { return i.fillIn('<div class="tags-container {tagsContainerClass} {state}"><input type="text" size="1" {state}><div>', { tagsContainerClass: i.sanitizeText(a.tagsContainerClass), state: t ? "disabled" : "" }) }(e), s = t(this), l = [], c = s.val(); c && t.each(c.split(";"), function (t, e) { var a = e.trim(); a.length > 0 && l.unshift(jQuery(n.replace("{value}", a))) }); var u = t(o); t.each(l, function (t, e) { u.prepend(e) }), s.after(u), s.attr("hidden", "true"), s.attr("data-rendered", "true") } }), t("i.tag-remove").click(i.removeTag), t(".tags-container").not("disabled").click(function (e) { t(this).children("input").focus() }), t(".tags-container").not("disabled").children("input").bind("input", function (t) { i.resetSize(this) }); var o = r(!1); t(".tags-container").not("disabled").children("input").keydown(function (e) { if ("Enter" === e.key || ";" === e.key || " " === e.key) { e.preventDefault(); var n = t(e.currentTarget); return n.val().trim().split(" ").forEach(e => { if (e) { e = i.sanitizeText(e); var r = n.siblings("div").filter(function () { return t(this).find("span").text() === e }); if (r.length > 0) a.hasOwnProperty("tagColor") || (a.tagColor = r.css("background-color")), i.blink(r, a.highlightColor, a.tagColor); else { var s = t(o.replace("{value}", e)); s.insertBefore(n), s.children("i").click(i.removeTag); var l = t(this).parent().prev(), c = l.val(); c.length > 0 && ";" !== c.charAt(c.length - 1) && (c += ";"), n.val(""), i.resetSize(n), l.val(c.concat(e).concat(";")) } } }), !1 } 8 === e.keyCode && "" === t(e.currentTarget).val() && t(this).prev("div.tag").remove() }) }, e.prototype.resetSize = function (e) { var n = t(e), a = n.val().length; n.attr("size", a < 1 ? 1 : a) }, e.prototype.removeTag = function (e) { var n = t(this), a = n.parent(), i = a.parent().prev(), r = n.siblings("span").text(), o = `(^${r};)|(;${r};)`, s = i.val().replace(new RegExp(o, "u"), ";"); i.val(s), a.remove() }, e.prototype.sanitizeText = function (e) { return t("<div>").text(e).html() }, e.prototype.blink = function (e, n, a) { var i = t(e); i.stop().animate({ backgroundColor: n }, 200).promise().done(function () { i.animate({ backgroundColor: a }, 200) }) }, e.prototype.fillIn = function (t, e) { return t.replace(new RegExp("{([^{]+)}", "g"), function (t, n) { return void 0 === e[n] ? "{".concat(n).concat("}") : e[n] }) } }(jQuery);